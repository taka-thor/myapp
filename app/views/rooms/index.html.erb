<div class="min-h-screen w-full max-w-[700px] mx-auto flex flex-col">
  <%= render "shared/header" %>

  <main class="flex-1 px-6 pb-10 pt-12 space-y-6">
    <section>
      <h1 class="text-xl sm:text-2xl font-semibold text-slate-900 text-center leading-relaxed">
        入室する部屋を選択しましょう
      </h1>
    </section>

    <section class="space-y-4">
      <% @rooms.each do |room| %>
        <% active_count = (@active_counts || {})[room.id] || 0 %>

        <%= link_to room_path(room),
                    class: "block transition-transform duration-150 hover:scale-[1.02] active:scale-95" do %>

          <div class="relative w-full rounded-2xl bg-white/80 shadow-md
                      px-5 py-5 sm:px-6 sm:py-6
                      flex items-center overflow-visible">

            <!-- 人数バッジ（必ず表示） -->
            <div class="absolute top-3 right-3 z-50">
              <span class="inline-flex items-center gap-1 rounded-full
                           bg-slate-200 text-white
                           text-xs sm:text-sm font-semibold
                           px-2.5 py-1">
                <span aria-hidden="true">👤</span>
                <span><%= active_count %></span>
              </span>
            </div>

            <p class="text-lg sm:text-xl font-semibold text-slate-900">
              <%= room.topic %>
            </p>
          </div>
        <% end %>
      <% end %>
    </section>
  </main>
</div>
