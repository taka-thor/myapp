<div class="min-h-screen w-full max-w-[700px] mx-auto flex flex-col">
  <%= render "shared/header" %>
  <%= render "shared/flash_messages"%>


  <main class="flex-1 px-6 pb-10 pt-8 space-y-6">
    <h1 class="text-xl sm:text-2xl font-semibold text-slate-900">ユーザー情報</h1>

    <section class="rounded-2xl bg-white/80 shadow-md p-5 space-y-5">
      <div class="flex flex-col items-center gap-3">
        <% if @user.icon_url.present? %>
          <div class="w-24 h-24 rounded-full overflow-hidden bg-white shadow flex items-center justify-center">
            <%= image_tag @user.icon_url, alt: "現在のアイコン", class: "w-[85%] h-[85%] object-contain" %>
          </div>
        <% else %>
          <div class="w-24 h-24 rounded-full bg-slate-200"></div>
        <% end %>
        <p class="text-sm text-slate-600">現在のアイコン</p>
      </div>

      <%= form_with model: @user, url: user_path, method: :patch, class: "space-y-5" do |f| %>
        <%= render "shared/error_messages", object: @user %>
        <div>
          <%= f.label :name, "ニックネーム", class: "block text-sm text-slate-700 mb-2" %>
          <%= f.text_field :name,
              class: "w-full rounded-xl border border-slate-300 px-4 py-3 bg-white text-slate-900",
              placeholder: "ひらがな10文字以内" %>
        </div>

        <div class="space-y-2">
          <p class="text-sm text-slate-700">アイコンを選択</p>
          <div class="grid grid-cols-4 gap-3">
            <% Array(@icons).each do |icon| %>
              <label class="cursor-pointer block">
                <%= f.radio_button :icon_url, icon, class: "sr-only peer" %>
                <div class="rounded-full p-1 ring-2 ring-transparent peer-checked:ring-sky-400 transition">
                  <div class="w-16 h-16 rounded-full overflow-hidden bg-slate-100 flex items-center justify-center">
                    <%= image_tag icon, alt: "アイコン", class: "w-[85%] h-[85%] object-contain" %>
                  </div>
                </div>
              </label>
            <% end %>
          </div>
        </div>

        <%= f.submit "更新する",
            class: "w-full rounded-xl bg-emerald-500 text-white py-3 font-semibold hover:opacity-90 active:scale-95 transition" %>
      <% end %>
    </section>
  </main>
</div>
